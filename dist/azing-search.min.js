var azingSearch=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class o{constructor(e,t,n){this.attachTo=e,this.resultCount=t,this.urls=n,this.visible=!1,this.updateNeedleDebounce=200,this.contentComponent=document.createElement("search-content");const o=floaters.positionStrategies.ninja("BOTTOM_RIGHT",{x:0,y:12},!0,!1),i=floaters.arrowStrategies.topStart(8,20);this.floater=floaters.generic(this.attachTo,this.contentComponent,{hasBackdrop:!1,positionStrategy:o,arrowStrategy:i})}update(e){if(this.needle===e)return;if(this.needle=e,this.updateNeedleTimeout&&clearTimeout(this.updateNeedleTimeout),this.contentComponent.previewFloater.hide(),this.contentComponent.abortDebounce(),""===e)return void this.contentComponent.setInitialState();const t=this.updateNeedleTimeout=setTimeout(()=>fetch(`https://azing.org/api/catalog/live/2sic/search/${e}?p=1`).then(e=>e.json()).then(n=>{this.updateNeedleTimeout===t&&(this.contentComponent.previewFloater.hide(),this.contentComponent.abortDebounce(),this.contentComponent.setRecipes(n?n.Recipes:[],n?n.Statistics:{},e))}),this.updateNeedleDebounce)}show(){this.visible=!0,this.floater.show()}hide(){this.visible=!1,this.floater.hide(),this.contentComponent.previewFloater.hide(),this.contentComponent.abortDebounce()}}var i=":host {\n  display: block;\n  width: 396px;\n  font-size: 0.8em;\n  opacity: .8;\n  cursor: pointer;\n  height: 437px;\n  overflow: hidden; }\n  :host:hover {\n    opacity: 1; }\n";var s=":host {\n  display: block;\n  padding: 8px 0;\n  width: 480px; }\n  :host .nothing {\n    display: block;\n    font-weight: 700;\n    text-align: center;\n    font-size: 14px;\n    line-height: 28px;\n    color: rgba(0, 0, 0, 0.6); }\n  :host .results {\n    font-size: 12px;\n    color: #788593;\n    line-height: 24px;\n    height: 24px;\n    padding: 0 16px 0 44px;\n    display: flex; }\n";window.customElements.define("search-content",class extends HTMLElement{constructor(){super(),this.contentEl=document.createElement("div"),this.previewEl=document.createElement("recipe-preview"),this.updatePreviewDebounce=200,this.activeEl=void 0,this.showCount=8,this.attachShadow({mode:"open"});const e=document.createElement("style");e.textContent=s,this.shadowRoot.appendChild(e),this.shadowRoot.appendChild(this.contentEl),this.previewEl.attachTo=this}connectedCallback(){const e=floaters.positionStrategies.ninja("TOP_LEFT",{x:-20,y:0},!0,!1);this.previewFloater=floaters.generic(this,this.previewEl,{hasBackdrop:!1,positionStrategy:e,arrowStrategy:()=>(console.log(this.activeEl),{size:8,x:0,y:this.activeEl?this.activeEl.offsetTop+19:0,fromRight:!0}),transition:()=>"bounce-right"}),this.setInitialState(),this.addEventListener("mousedown",e=>{e.stopPropagation(),e.preventDefault()})}setRecipes(e,t,n){if(this.previewFloater.hide(),this.contentEl.innerHTML="",0===e.length)return void(this.contentEl.innerHTML='<span class="nothing">(╯°□°)╯︵<br>Found nothing.</span>');const o=e.slice(0,this.showCount).map(e=>this.createEntry(e,n)).concat([this.createGlobalResultsLink()]);this.setResultsMessage(o.length,t.Matches||0),o.forEach(e=>this.contentEl.appendChild(e)),o.forEach((e,t)=>setTimeout(()=>e.classList.toggle("loaded",!0),20*t))}abortDebounce(){this.updatePreviewTimeout&&clearTimeout(this.updatePreviewTimeout)}setInitialState(){this.contentEl.innerHTML='<span class="nothing">recent recipes maybe?</span>'}createGlobalResultsLink(){return document.createElement("search-result-all-of-tenant")}setResultsMessage(e,t){const n=t-e,o=document.createElement("div");o.classList.toggle("results",!0),o.innerHTML=n>0?`\n      <span style="flex: 1 1;">recipes in › folder name</span>\n      <span>show ${n} more</span>\n    `:`\n      <span style="flex: 1 1;">recipes in › folder name</span>\n      <span>found ${e}</span>\n    `,this.contentEl.appendChild(o)}createEntry(e,t){const n=document.createElement("search-result-recipe");return n.recipe=e,n.searchString=t,n.addEventListener("mouseover",()=>{this.activeEl&&this.activeEl.classList.toggle("active",!1),this.activeEl=n,n.classList.toggle("active",!0),this.updatePreview(e)}),n}updatePreview(e){if(e===this.updatePreviewRecipeQueue)return;this.updatePreviewRecipeQueue=e,this.previewFloater.hide(),this.abortDebounce();const t=this.updatePreviewTimeout=setTimeout(()=>fetch(`https://azing.org/api/catalog/live/2sic/browse/${e.ShortId}`).then(e=>e.json()).then(e=>{this.updatePreviewTimeout===t&&(this.previewEl.update(e),this.previewFloater.boxComponent.reposition(),this.previewFloater.show())}),this.updatePreviewDebounce)}}),window.customElements.define("search-result-recipe",class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"});const e=document.createElement("style");e.textContent="\n      :host {\n        display: flex;\n        flex-direction: row;\n        box-sizing: border-box;\n        line-height: 44px;\n        height: 44px;\n        font-size: 14px;\n        padding: 0 16px 0 0;\n        color: #617082;\n        cursor: pointer;\n        overflow: hidden;\n        opacity: 0;\n        transition: opacity .4s ease;\n      }\n      :host(.loaded) {\n        opacity: 1;\n      }\n      :host(.active) {\n        background-color: #ede7f9;\n        color: #2122bd;\n      }\n      :host .icon {\n        font-family: 'Material Icons';\n        text-align: center;\n        font-size: 27px;\n        width: 44px;\n      }\n      :host .content {\n        display: flex;\n        flex-direction: column;\n        flex: 1 1;\n        padding: 6px 0;\n      }\n      :host .title {\n        height: 20px;\n        line-height: 20px;\n        font-weight: 600;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        width: calc(480px - 44px - 16px);\n      }\n      :host .title .found {\n        color: #ff3939;\n      }\n      :host .breadcrumb {\n        height: 12px;\n        line-height: 12px;\n        width: calc(480px - 44px - 16px);\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        box-sizing: border-box;\n      }\n      :host .breadcrumb a {\n        color: #909aa6;\n        text-decoration: none;\n        font-size: 12px;\n        transition: color .2s ease;\n      }\n      :host .breadcrumb a:hover {\n        color: #617082;\n      }\n      :host .breadcrumb span {\n        display: inline-block;\n        font-family: 'Material Icons';\n        vertical-align: middle;\n      }\n    ",this.shadowRoot.appendChild(e),this.shadowRoot.addEventListener("click",e=>{"A"!==e.target.tagName&&window.open(this.recipe.ShortId,"_blank")})}connectedCallback(){const e=this.getBreadcrumb(this.recipe.Path);this.shadowRoot.innerHTML+=`\n      <div class="icon">\n        <span>check_circle_outline</span>\n      </div>\n      <div class="content">\n        <span class="title">${this.wrapFoundInTags(this.recipe.Title)}</span>\n        <span class="breadcrumb">${e}</span>\n      </div>\n    `}wrapFoundInTags(e){const t=this.searchString.toLowerCase(),n=t.toLowerCase().split(" "),o=t.split(" "),i=new RegExp("("+o.join("|")+")","i");return e.split(i).map(e=>n.includes(e.toLowerCase())?`<span class="found">${e}</span>`:e).join("")}getBreadcrumb(e){const t=({ShortId:e,Title:t})=>`<a href="${e}" title="${t}" target="_blank">${t}</a>`,n=t(e[0]),o=e.length;if(1===o)return n;const i=t(e[o-1]);return(2===o?[n,i]:[n,"<span>more_horiz</span>",i]).join(" › ")}}),window.customElements.define("search-result-all-of-tenant",class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"});const e=document.createElement("style");e.textContent="\n      :host {\n        display: flex;\n        flex-direction: row;\n        box-sizing: border-box;\n        line-height: 44px;\n        height: 44px;\n        font-size: 14px;\n        padding: 0 16px 0 0;\n        color: #617082;\n        cursor: pointer;\n        overflow: hidden;\n        opacity: 0;\n        transition: opacity .4s ease;\n      }\n      :host(.loaded) {\n        opacity: .8;\n      }\n      :host(:hover) {\n        opacity: 1;\n      }\n      :host .icon {\n        font-family: 'Material Icons';\n        text-align: center;\n        font-size: 27px;\n        width: 44px;\n      }\n      :host .content {\n        display: flex;\n        flex-direction: column;\n        flex: 1 1;\n        padding: 6px 0;\n      }\n      :host .title {\n        height: 20px;\n        line-height: 20px;\n        font-weight: 600;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        width: calc(480px - 44px - 16px);\n      }\n      :host .title .found {\n        color: #ff3939;\n      }\n      :host .detail {\n        display: inline-block;\n        height: 12px;\n        line-height: 12px;\n        width: calc(480px - 44px - 16px);\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        box-sizing: border-box;\n        color: #909aa6;\n        text-decoration: none;\n        font-size: 12px;\n        transition: color .2s ease;\n      }\n    ",this.shadowRoot.appendChild(e)}connectedCallback(){this.shadowRoot.innerHTML+='\n        <div class="icon">\n          <span>search</span>\n        </div>\n        <div class="content">\n          <span class="title">Show all of 2sic</span>\n          <span class="detail">8 additional results found</span>\n        </div>\n      '}}),window.customElements.define("recipe-preview",class extends HTMLElement{constructor(){super(),this.contentEl=document.createElement("div"),this.attachShadow({mode:"open"}).innerHTML="<slot></slot>";const e=document.createElement("style");e.textContent=i,this.shadowRoot.appendChild(e),this.addEventListener("mousedown",e=>{e.stopPropagation(),e.preventDefault()})}connectedCallback(){Object.assign(this.contentEl.style,{pointerEvents:"none",width:"720px",height:"1200px",transformOrigin:"0 0",transform:"scale(.55)",backgroundColor:"#fff"}),this.appendChild(this.contentEl)}update(e){const t=e.Current.Body;this.contentEl.innerHTML="",this.previewActivity(t)}previewRawHtml(e){const t=document.createElement("a");t.href="#",t.target="_blank",t.innerHTML=e,this.contentEl.appendChild(t)}previewActivity(e){const t=document.createElement("azing-activity");t.activityTemplate=e,t.azingContext={domainName:"azing.org"},this.contentEl.appendChild(t)}});t.default=((e,t,n)=>new o(e,t,n))}]).default;